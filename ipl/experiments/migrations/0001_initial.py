# Generated by Django 3.1.7 on 2021-03-17 05:30

import colorfield.fields
from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import experiments.models
import filebrowser.fields
import tinymce.models
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='AnswerBase',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='BlockItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(max_length=20)),
                ('comment', models.TextField(blank=True, null=True)),
                ('background_colour', colorfield.fields.ColorField(default='#FFFFFF', max_length=18)),
                ('randomise_trials', models.BooleanField(default=False)),
                ('position', models.PositiveSmallIntegerField(null=True, verbose_name='Position')),
            ],
            options={
                'ordering': ['position'],
            },
        ),
        migrations.CreateModel(
            name='Experiment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('exp_name', models.CharField(max_length=200, verbose_name='experiment name')),
                ('created_on', models.DateTimeField(verbose_name='date created')),
                ('sharing_option', models.CharField(choices=[('OWN', 'Only me'), ('GRP', 'Group members only'), ('PUB', 'Everyone')], default='OWN', max_length=3, verbose_name='sharing options')),
                ('list_selection_strategy', models.CharField(choices=[('LPF', 'Least played'), ('SEQ', 'Sequential'), ('RAN', 'Random')], default='LPF', max_length=3, verbose_name='list selection strategy')),
                ('include_pause_page', models.BooleanField(default=True, help_text='When global timeout is encountered / exit button is pressed, go to pause page instead of ending experiment immediately.')),
                ('loading_image', filebrowser.fields.FileBrowseField(blank=True, help_text='Shown at the end of the experiment, if media recordings are still being uploaded.', max_length=200)),
                ('recording_option', models.CharField(choices=[('VID', 'Video'), ('AUD', 'Audio only'), ('NON', 'Key/Click responses only')], default='VID', max_length=3)),
                ('general_onset', models.IntegerField(default=0, verbose_name='wait to enable key/click response (ms)')),
                ('information_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n{% block title %}Online-Studie der Kindsköpfe Göttingen{% endblock %} \n\n{% block content %}\n<div class="container" id="information">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Online-Studie der Kindsköpfe Göttingen</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card">\n                <div class="card-body text-justify">\n                    <p class="card-text">\n                        Liebe Eltern,<br /><br />\n\n                        herzlich Willkommen zu dieser Studie der Kindsköpfe Göttingen.<br /><br />\n\n                        Wenn Sie zusammen mit Ihrem Kind teilnehmen möchten, lesen Sie bitte die folgenden Informationen aufmerksam durch:<br />\n                        - In dieser Studie untersuchen wir XXX<br />\n                        - Für die Teilnahme muss Ihr Kind XXX alt sein.<br />\n                        - Um diese Online-Studie auswerten zu können, benötigen wir Video-Mitschnitte. Dafür möchten wir die Webcam Ihres Computers nutzen. Für die Teilnahme müssen Sie a einem Computer oder Laptop mit Webcam sein und dazu bereit sein, diese zur Aufnahme freizugeben. Die Videos werden über eine sichere Verbindung (TLS-Verschlüsselung, 256 Bit) direkt auf die Server der Universität Göttingen übertragen, wo sie unter höchsten Sicherheitsstandards gespeichert werden.<br /> \n                        - Für die Aufnahme muss Ihr Kind auf Ihrem Schoß sitzen und die Webcam muss so ausgerichtet sein, dass Ihr Kind sichtbar ist. <br />\n                        - Wir werden Ihnen vorab ein paar Fragen stellen. Sie Speicherung Ihrer persönlichen Daten erfolgt separat von den Daten und Videos der Studie.<br />\n                        - Die Studie ist nur mit den Browsern Firefox und Google Chrome kompatibel. Bitte nutzen Sie einen dieser Browser. <br />\n                        - Sie können die Studie jederzeit ohne Begründung abbrechen. Während der gesamten Erhebung wird rechts unten im Bild ein Feld „Abbrechen“ sichtbar sein. Klicken Sie dieses an, falls Sie die Studie vorzeitig abbrechen möchten.<br />\n                        - Sie können jederzeit die Löschung Ihrer Daten veranlassen. Schreiben Sie dazu eine Email an XXX und nennen Sie den genauen Namen, den Sie ins Namensfeld eingegeben haben.<br /><br />\n\n                        Wenn Sie einverstanden sind, klicken Sie bitte unten auf „Weiter“. Bevor es losgeht werden wir Ihnen noch einige Fragen stellen und einige technische Checks durchführen.<br /><br />\n\n                        Wir freuen uns über Ihre Teilnahme!\n                    </p>\n                    <form action="{% url \'experiments:browserCheck\' experiment.id %}" method="post">\n                        {% csrf_token %}\n                        <div class="text-center">\n                            <button type="submit" class="btn btn-primary" id="nextbutton">Weiter</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}', verbose_name='welcome page template')),
                ('browser_check_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} {% load static %} {% block title %}Prüfe Kompatibilität des Browsers{% endblock %}\n{% block content %}\n<div class="container" id="information">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Prüfe Kompatibilität des Browsers</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card active" id="webcam_step_1">\n                <!-- h4 class="card-header">1. Schritt</h4-->\n                <div class="card-body">\n                    <!--h4 class="card-title">Prüfe Kompatibilität des Browsers</h4-->\n                    <p class="card-text">\n                        Wir prüfen nun die Kompatibilität Ihres Browsers. Die Studie ist nur mit Firefox und Google Chrome kompatibel. Falls der Test fehlschlägt, starten Sie die Studie bitte erneut mit einem dieser Browser.\n                    </p>\n                    <div class="alert alert-success" role="alert" style="display: none;">\n                        Sie benutzen einen kompatiblen Browser. Bitte fahren Sie fort.\n                    </div>\n                    <div class="alert alert-danger" role="alert" style="display: none;">\n                        Sie benutzen einen inkompatiblen Browser. Bitte benutzen Sie Google Chrome oder Mozilla Firefox und öffnen Sie die Seite\n                        erneut.\n                    </div>\n                    <form action="{% url \'experiments:consentForm\' experiment.id %}" method="post">\n                        {% csrf_token %}\n                        <button type="submit" disabled="disabled" class="btn btn-primary" id="nextbutton">Weiter</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<script src="{% static \'experiments/js/detectrtc.min.js\' %}"></script>\n<script src="{% static \'experiments/js/browser-check.js\' %}"></script>\n{% endblock %}', verbose_name='browser check page template')),
                ('introduction_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} {% block title %}Einverständnis zur Studienteilnahme{% endblock %} {% block content %}\n<div class="container">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Einverständnis zur Studienteilnahme</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card">\n                <div class="card-body">\n                    {% if error_message %}\n                    <div class="alert alert-danger" role="alert">\n                        {{ error_message }}\n                    </div>\n                    {% endif %}\n                    <form action="{% url \'experiments:consentFormSubmit\' experiment.id %}" method="post" novalidate>\n                        {% csrf_token %}\n                        <p class="card-text">\n                            Bitte lesen Sie die folgenden Punkte aufmerksam durch und geben Sie an, ob Sie diesen zustimmen.<br /><br />\n                            Die Teilnahme an der Studie ist nur möglich, wenn Sie mit jedem der folgenden Punkte einverstanden sind.\n                        </p>\n                        <p><br><span class="asterix">* Pflichtfeld</span></p>\n                        {% for field in consent_form %}\n                        <div class="q-item" value="{{ forloop.counter }}">\n                            <div class="field-wrapper question-required">\n                                {{ field.errors }}\n                                <label class="label-inline">{{ field.label }}<span class="asterix"> * </span></label>\n                                <div class="form-field-body">\n                                    {{ field }}\n                                </div>\n                            </div>\n                        </div><br>\n                        {% endfor %}\n                        <button type="submit" class="btn btn-primary">Weiter</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}', verbose_name='consent form template')),
                ('consent_fail_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n{% block title %}Einverständnis nicht erteilt{% endblock %} \n\n{% block content %}\n<div class="container" id="consentFail">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Einverständnis nicht erteilt</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col text-center ">\n            <div class= "card-body alert alert-danger">\n                <p class="card-text">\n                        Sie waren nicht mit allen Punkten einverstanden. Daher können wir mit der Studie nicht fortfahren.<br /><br />\n                        Falls Sie tatsächlich nicht einverstanden sind, schließen Sie bitte Ihr Browserfenster.<br /><br />\n                        Falls Sie zurückkehren und Ihre Eingabe ändern möchten, klicken Sie bitte „zurück“.\n                </p>\n            </div>\n            <form action="{% url \'experiments:consentForm\' experiment.id %}" method="post">\n            {% csrf_token %}        \n                <button type="submit" class="btn btn-primary" id="resumebutton">Zurück</button>\n            </form>\n        </div>\n    </div>\n</div>\n{% endblock %}', verbose_name='consent failed page template')),
                ('demographic_data_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} {% block title %}Persönliche Angaben{% endblock %} {% block content %}\n<div class="container">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Persönliche Angaben</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card">\n                <div class="card-body">\n                    {% if error_message %}\n                    <div class="alert alert-danger" role="alert">\n                        {{ error_message }}\n                    </div>{% endif %}\n\n                    <form action="{% url \'experiments:subjectFormSubmit\' experiment.id %}" method="post" novalidate>\n                        {% csrf_token %}\n                        <p class="card-text">\n                            Bitte füllen Sie die Felder unten aus. Sie müssen mindestens alle mit einem * versehenen Felder ausfüllen, um an der Studie teilnehmen zu können.\n                        </p>\n                        <p><br><span class="asterix">* Pflichtfeld</span></p>\n                        {% for field in subject_data_form %}\n                        {% if field.name == \'resolution_w\' or field.name == \'resolution_h\' %}\n                            {{ field }}\n                        {% else %}\n                        <div class="q-item" value="{{ forloop.counter }}">\n                            {% if field.field.required %}\n                            <div class="field-wrapper question-required">\n                                {{ field.errors }}\n                                <label class="label-inline">{{ field.label }} <span class="asterix">*</span></label>\n                            {% else %}\n                            <div class="field-wrapper">\n                                {{ field.errors }}\n                                <label class="label-inline">{{ field.label }}</label>\n                            {% endif %}\n                                <div class="form-field-body">\n                                    {{ field }}\n                                </div>\n                                <small class="form-text text-muted">{{ field.help_text }}</small>\n                            </div>\n                        </div><br>\n                        {% endif %}\n                        {% endfor %}\n                        <button type="submit" class="btn btn-primary">Weiter</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}', verbose_name='demographic data page template')),
                ('webcam_check_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} {% load static %} {% block title %}Webcam und Mikrofon einrichten{% endblock %} {% block content%}\n<div class="container" id="webcam-calibration" data-subject-uuid="{{ subject_data.id }}">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Webcam und Mikrofon einrichten</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card active" id="webcam_step_2">\n                <div class="card-body">\n                    <p class="card-text">\n                        Für diese Studie ist es notwendig, dass Sie Zugriff auf Webcam und Mikrofon erlauben.<br /><br />\n                        Ihr Browser wird Sie im nächsten Schritt um Erlaubnis bitten, Webcam und Mikrofon freizuschalten. Klicken Sie dann bitte auf "Erlauben", um mit dem Experiment fortzufahren.<br /><br />\n                        Falls Ihnen die Option „immer erlauben“ angeboten wird, wählen Sie bitte diese, damit Ihr Browser die Einstellung speichert (nur für unseren Server). Sie können auch nur den Einzelfall erlauben. Dann wird Ihr Browser in den nächsten Schritten noch mehrmals um Erlaubnis zur Freischaltung von Webcam und Mikrofon bitten.\n                    </p>\n                    <button type="button" class="btn btn-primary" disabled>Weiter</button>\n                </div>\n            </div>\n\n            <div class="card" id="webcam_step_3">\n                <div class="card-body">\n                    <p class="card-text">\n                        Sie sehen nun unten ein Fenster mit dem Kamerabild. Bitte justieren Sie Ihre Kamera so, dass Ihr Kind gut sichtbar ist.<br /><br />\n                        Gleich machen wir eine kurze Probeaufnahme (ca. 3 Sekunden) um zu testen, ob die Aufnahme mit Bild und Ton funktioniert. Sobald sie unten klicken, startet die Probeaufnahme. Bitte sagen Sie nachdem Sie geklickt haben laut etwas (z.B. „hallo“), damit Sie die Tonaufnahme überprüfen können.\n                    </p>\n                    <div class="alert alert-danger" role="alert" style="display: none;"></div>\n                    <div class="embed-responsive" style="display: none;">\n                        <video controls class="embed-responsive-item"></video>\n                    </div>\n                    <button type="button" class="btn btn-primary" disabled>Probeaufnahme jetzt starten</button>\n                    <button type="button" class="btn btn-warning" id="repeat-check-button" style="display: none;">Webcam-Test wiederholen</button>\n                </div>\n            </div>\n\n            <div class="card" id="webcam_step_4">\n                <div class="card-body">\n                    <p class="card-text">\n                        Unten sehen Sie das Probevideo. Bitte spielen Sie dieses ab und beurteilen Sie, ob Ihr Kind und Sie gut sichtbar sind und ob der Ton aufgenommen wurde.<br /><br />\n                        Achten dabei bitte darauf, dass der Sound auf Ihrem Computer aktiviert ist.\n                    </p>\n                    <p class="card-text" id="upload-progress">\n                        <img src="{% static \'experiments/img/loading.gif\' %}" alt="Laden" title="Loading" />\n                    </p>\n                    <div class="alert alert-danger" role="alert" style="display: none;">\n                        Der Upload des Videos ist fehlgeschlagen.<br />\n                    </div>\n                    <div class="embed-responsive" style="display: none;">\n                    </div>\n                    <div class="alert alert-success" role="alert" style="display: none;">\n                        Der Upload des Videos war erfolgreich, bitte fahren Sie fort.\n                    </div>\n\n                    <button type="button" class="btn btn-primary" disabled data-target="{% url \'experiments:experimentRun\' subject_data.pk %}">Weiter (Bild und Ton haben funktioniert)</button>\n                    <button type="button" class="btn btn-warning" disabled data-toggle="modal" data-target="#repeatWebcamModal">Test Wiederholen (Es gab Probleme bei der Probeaufnahme)</button>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div class="modal fade" id="repeatWebcamModal" tabindex="-1" role="dialog" aria-labelledby="repeatWebcamModalLabel" aria-hidden="true">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="repeatWebcamModalLabel">Webcam Test Wiederholen</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                Falls Sie keinen Ton hören konnten: Stellen Sie bitte in den Soundeinstellungen Ihres Computers sicher, dass Ihr  und Ihr Lautsprecher aktiviert sind und überprüfen Sie, dass Ihr Ton nicht zu leise gestellt ist.\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Abbrechen</button>\n                <button type="button" class="btn btn-primary" id="repeatRutton">Test Wiederholen</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<button id="exit-button" type="button" class="btn btn-secondary btn-sm">Beenden</button>\n<script>\n    var webcam_not_found = `Leider konnte Ihre Webcam nicht gefunden werden.<br /><br />Bitte stellen Sie sicher, dass eine Webcam angeschlossen ist und klicken Sie „Prüfung wiederholen“ um zum Webcam-Test zurückzukehren.<br /><br />Sollten Sie mit der Freischaltung Ihrer Webcam nicht einverstanden sein und deshalb auf „nicht erlauben“ ausgewählt haben, schließen Sie bitte das Browser-Fenster.`;\n    var include_pause_page = "{{ experiment.include_pause_page }}";\n    var recording_option = "{{ experiment.recording_option }}";\n</script>\n<script src="{% static \'experiments/js/detectrtc.min.js\' %}"></script>\n<script src="{% static \'experiments/js/webcam-calibration.js\' %}"></script>\n{% endblock %}', verbose_name='webcam check page template (ignore if not applicable)')),
                ('microphone_check_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} {% load static %} {% block title %}Mikrofon einrichten{% endblock %} {% block content%}\n<div class="container" id="webcam-calibration" data-subject-uuid="{{ subject_data.id }}">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Mikrofon einrichten</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card active" id="webcam_step_2">\n                <div class="card-body">\n                    <p class="card-text">\n                        Für diese Studie ist es notwendig, dass Sie Zugriff auf Mikrofon erlauben.<br /><br />\n                        Ihr Browser wird Sie im nächsten Schritt um Erlaubnis bitten, Mikrofon freizuschalten. Klicken Sie dann bitte auf "Erlauben", um mit dem Experiment fortzufahren.<br /><br />\n                        Falls Ihnen die Option „immer erlauben“ angeboten wird, wählen Sie bitte diese, damit Ihr Browser die Einstellung speichert (nur für unseren Server). Sie können auch nur den Einzelfall erlauben. Dann wird Ihr Browser in den nächsten Schritten noch mehrmals um Erlaubnis zur Freischaltung von Mikrofon bitten.\n                    </p>\n                    <button type="button" class="btn btn-primary" disabled>Weiter</button>\n                </div>\n            </div>\n\n            <div class="card" id="webcam_step_4">\n                <div class="card-body">\n                    <p class="card-text">\n                        Unten sehen Sie das Probeaudio. Bitte spielen Sie dieses ab und beurteilen Sie, ob Ihr Kind und Sie gut sichtbar sind und ob der Ton aufgenommen wurde.<br /><br />\n                        Achten dabei bitte darauf, dass der Sound auf Ihrem Computer aktiviert ist.\n                    </p>\n                    <p class="card-text" id="upload-progress">\n                        <img src="{% static \'experiments/img/loading.gif\' %}" alt="Laden" title="Loading" />\n                    </p>\n                    <div class="alert alert-danger" role="alert" style="display: none;">\n                        Der Audio-Upload ist fehlgeschlagen.<br />\n                    </div>\n                    <div class="embed-responsive" style="display: none;">\n                    </div>\n                    <div class="alert alert-success" role="alert" style="display: none;">\n                        Der Audio-Upload war erfolgreich, bitte fahren Sie fort.\n                    </div>\n\n                    <button type="button" class="btn btn-primary" disabled data-target="{% url \'experiments:experimentRun\' subject_data.pk %}">Weiter (Ton haben funktioniert)</button>\n                    <button type="button" class="btn btn-warning" disabled data-toggle="modal" data-target="#repeatWebcamModal">Test Wiederholen (Es gab Probleme bei der Probeaufnahme)</button>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div class="modal fade" id="repeatWebcamModal" tabindex="-1" role="dialog" aria-labelledby="repeatWebcamModalLabel" aria-hidden="true">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title" id="repeatWebcamModalLabel">Mikrofon-Test Wiederholen</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                Falls Sie keinen Ton hören konnten: Stellen Sie bitte in den Soundeinstellungen Ihres Computers sicher, dass Ihr  und Ihr Lautsprecher aktiviert sind und überprüfen Sie, dass Ihr Ton nicht zu leise gestellt ist.\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">Abbrechen</button>\n                <button type="button" class="btn btn-primary" id="repeatRutton">Test Wiederholen</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<button id="exit-button" type="button" class="btn btn-secondary btn-sm">Beenden</button>\n<script>\n    var webcam_not_found = `Leider konnte Ihr Microfon nicht gefunden werden.<br /><br />Bitte stellen Sie sicher, dass ein Microfon angeschlossen ist und klicken Sie „Prüfung wiederholen“ um zum Mikrofon-Test zurückzukehren.<br /><br />Sollten Sie mit der Freischaltung Ihres Mikrofons nicht einverstanden sein und deshalb auf „nicht erlauben“ ausgewählt haben, schließen Sie bitte das Browser-Fenster.`;\n    var include_pause_page = "{{ experiment.include_pause_page }}";\n    var recording_option = "{{ experiment.recording_option }}";\n</script>\n<script src="{% static \'experiments/js/detectrtc.min.js\' %}"></script>\n<script src="{% static \'experiments/js/webcam-calibration.js\' %}"></script>\n{% endblock %}', verbose_name='microphone check page template (ignore if not applicable)')),
                ('experiment_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n\n{% block title %}Experiment{% endblock %} \n\n{% block content %}\n<div class="container h-100 text-center" id="fullscreen-message">\n    <div class="row h-100 justify-content-center align-items-center">\n        <div class="col">\n            <p class="card-text">\n                Gleich geht es los!<br /><br />\n                Bevor die Studie startet, möchten wir noch eine kurze Erklärung von Ihnen aufzeichnen. Lesen Sie dafür bitte den Text auf der nächsten Seite mit Ihrem Kind auf dem Schoß laut vor. <br /><br />\n                Diese wiederholte Erklärung ist uns wichtig, da wir wirklich sichergehen möchten, dass Sie die Rahmenbedingungen verstanden haben und mit Ihnen einverstanden sind. Sollte uns diese Aufnahme nicht vorliegen, werden wir Ihre Daten und Videos löschen. <br /><br />\n                Nach der Erklärung startet die Studie direkt. Folgen Sie dann bitte den Hinweisen auf dem Monitor. <br />\n                Die Studie wird im Vollbild dargeboten. Sollten Sie die Studie zwischendurch beenden oder unterbrechen wollen, klicken Sie bitte unten rechts auf „beenden“. <br /><br />\n                Um fortzufahren, klicken Sie bitte „Vollbild aktivieren“\n            </p>\n            <button id="fullscreen-button" type="button" class="btn btn-primary">Vollbild aktivieren</button>\n        </div>\n    </div>\n</div>\n\n<button id="exit-button" type="button" class="btn btn-secondary btn-sm">Beenden</button>\n\n<div id="trials" style="display: none;" data-subject-uuid="{{ subject_data.id }}" data-subject-id="{{ subject_data.participant_id }}"></div>\n\n<script>\n    var trials = {{ trials|safe }}\n    var loading_image = "{{ loading_image.url }}";\n    var global_timeout = "{{ global_timeout }}";\n    var include_pause_page = "{{ include_pause_page }}";\n    var recording_option = "{{ recording_option }}";\n    var general_onset = "{{ general_onset }}";\n</script>\n \n<script src="{% static \'experiments/js/experiment.js\' %}"></script>\n{% endblock %}\n', verbose_name='experiment page template')),
                ('pause_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n{% block title %}Pause{% endblock %} \n\n{% block content %}\n<div class="container" id="pause">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Pause</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card">\n                <div class="card-body text-center">\n                    <p>\n                        Das Experiment wurde pausiert und die Aufnahme unterbrochen.<br /><br />\n                        Wenn Sie die Studie abbrechen möchten, klicken Sie unten bitte auf „Experiment beenden“. <br /><br />\n                        Um fortzufahren, klicken Sie bitte „Experiment fortsetzen“. Sie werden dann zu einem erneuten Webcam-Test geleitet und anschließend an die Stelle der Studie, an der Sie pausiert haben.\n                    </p>\n                    <div id="side-by-side-left"> \n                        <form action="{% url \'experiments:webcamTest\' subject_id %}" method="post">\n                            {% csrf_token %}        \n                            <button type="submit" class="btn btn-primary" id="resumebutton">Experiment Fortsetzen</button>\n                        </form>\n                    </div>\n                    <div id="side-by-side-right"> \n                        <form action="{% url \'experiments:experimentEnd\' subject_id %}" method="post">\n                            {% csrf_token %}        \n                            <button type="submit" class="btn btn-danger" id="exitbutton">Experiment Beenden</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}', verbose_name='pause page template')),
                ('thank_you_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n{% block title %}Fertig{% endblock %} \n\n{% block content %}\n<div class="container" id="thank-you">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Fertig</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card active" id="end_page_step_1">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Die Studie ist nun abgeschlossen und die Webcamaufnahme wurde beendet.<br /><br />\n                    </p>\n                    <div id="side-by-side-left"> \n                        <button type="button" class="btn btn-primary" id="approve-data-button">Approve processing and use of data</button>\n                    </div>\n                    <div id="side-by-side-right"> \n                        <form action="{% url \'experiments:deleteSubject\' subject_id %}" method="post">\n                            {% csrf_token %}        \n                            <button type="submit" class="btn btn-danger" id="delete-data-button">Remove all my data</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div class="card" id="end_page_approve">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Vielen Dank für Ihre Teilnahme!<br /><br />\n                        Bitte schließen Sie jetzt dieses Browser-Fenster.\n                    </p>\n                </div>\n            </div>\n            <div class="card" id="end_page_disapprove">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Alle Ihre Daten wurden entfernt.<br /><br />\n                        Bitte schließen Sie jetzt dieses Browser-Fenster.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script src="{% static \'experiments/js/endpage.js\' %}"></script>\n{% endblock %}', verbose_name='standard end page template')),
                ('thank_you_abort_page_tpl', tinymce.models.HTMLField(default='{% extends "experiments/base.html" %} \n{% load static %}\n{% block title %}Fertig{% endblock %} \n\n{% block content %}\n<div class="container" id="thank-you">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Fertig</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card active" id="end_page_step_1">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Schade, dass Sie die Studie abgebrochen haben. Die Webcamaufnahme wurde beendet. Bitte schließen Sie jetzt dieses Browser-Fenster.<br /><br />\n                        Wir würden gerne erfahren, warum Sie die Studie abgebrochen haben. Falls Sie uns dies mitteilen möchten, schreiben Sie bitte eine Email an XXX.\n                    </p>\n                    <div id="side-by-side-left"> \n                        <button type="button" class="btn btn-primary" id="approve-data-button">Approve processing and use of data</button>\n                    </div>\n                    <div id="side-by-side-right"> \n                        <form action="{% url \'experiments:deleteSubject\' subject_id %}" method="post">\n                            {% csrf_token %}        \n                            <button type="submit" class="btn btn-danger" id="delete-data-button">Remove all my data</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div class="card" id="end_page_approve">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Vielen Dank für Ihre Teilnahme!<br /><br />\n                        Bitte schließen Sie jetzt dieses Browser-Fenster.\n                    </p>\n                </div>\n            </div>\n            <div class="card" id="end_page_disapprove">\n                <div class="card-body text-center">\n                    <p class="card-text">\n                        Alle Ihre Daten wurden entfernt.<br /><br />\n                        Bitte schließen Sie jetzt dieses Browser-Fenster.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script src="{% static \'experiments/js/endpage.js\' %}"></script>\n{% endblock %}', verbose_name='end page after discontinuation template')),
                ('error_page_tpl', tinymce.models.HTMLField(default='<div class="container" id="information">\n    <div class="row">\n        <div class="col text-center">\n            <h1>Fehler</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col">\n            <div class="card">\n                <div class="card-body text-justify">\n                    <p class="card-text">\n                        Es ist ein Fehler aufgetreten. Das Experiment wurde beendet.\n                    </p>\n                    <div class="alert alert-danger" role="alert">\n                        Error message\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>', verbose_name='error page template')),
                ('sharing_groups', models.ManyToManyField(blank=True, to='auth.Group')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ListItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('list_name', models.CharField(max_length=20)),
                ('global_timeout', models.IntegerField(default=300000, verbose_name='global timeout (ms)')),
                ('exclude_list', models.BooleanField(default=False, verbose_name='do not include this list')),
                ('experiment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.experiment')),
            ],
        ),
        migrations.CreateModel(
            name='SubjectData',
            fields=[
                ('id', models.CharField(max_length=36, primary_key=True, serialize=False, verbose_name='Unique ID')),
                ('participant_id', models.IntegerField(blank=True, null=True, verbose_name='Participant Number')),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('resolution_w', models.IntegerField(default=0, verbose_name='Resolution Width')),
                ('resolution_h', models.IntegerField(default=0, verbose_name='Resolution Height')),
                ('experiment', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='experiments.experiment')),
                ('listitem', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='experiments.listitem')),
            ],
            options={
                'verbose_name': 'Participant data',
                'verbose_name_plural': 'Participant data',
            },
        ),
        migrations.CreateModel(
            name='TrialItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('label', models.CharField(max_length=20)),
                ('code', models.CharField(max_length=20)),
                ('visual_onset', models.IntegerField(default=0, verbose_name='visual onset (ms)')),
                ('audio_onset', models.IntegerField(default=0, verbose_name='audio onset (ms)')),
                ('audio_file', filebrowser.fields.FileBrowseField(blank=True, max_length=200)),
                ('visual_file', filebrowser.fields.FileBrowseField(max_length=200)),
                ('user_input', models.CharField(choices=[('NO', 'Do not require user input'), ('YES', 'Require user input')], default='NO', max_length=3)),
                ('response_keys', models.CharField(blank=True, help_text='Provide a comma-separated list if multiple response keys are allowed (e.g., click, up, down, left, right, a, b)', max_length=200, null=True, verbose_name='response key(s)')),
                ('max_duration', models.IntegerField(help_text='This value will be ignored for video trials which do not require user input.', verbose_name='maximum duration (ms)')),
                ('record_media', models.BooleanField(default=True, help_text='This value will be ignored if the experiment is set to record key/click responses only.')),
                ('grid_row', models.IntegerField(default=1, verbose_name='rows')),
                ('grid_col', models.IntegerField(default=1, verbose_name='columns')),
                ('position', models.PositiveSmallIntegerField(null=True, verbose_name='Position')),
                ('blockitem', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.blockitem')),
            ],
            options={
                'ordering': ['position'],
            },
        ),
        migrations.CreateModel(
            name='AnswerInteger',
            fields=[
                ('answerbase_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='experiments.answerbase')),
                ('body', models.IntegerField(blank=True, null=True)),
            ],
            bases=('experiments.answerbase',),
        ),
        migrations.CreateModel(
            name='AnswerRadio',
            fields=[
                ('answerbase_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='experiments.answerbase')),
                ('body', models.TextField(blank=True, null=True)),
            ],
            bases=('experiments.answerbase',),
        ),
        migrations.CreateModel(
            name='AnswerSelect',
            fields=[
                ('answerbase_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='experiments.answerbase')),
                ('body', models.TextField(blank=True, null=True)),
            ],
            bases=('experiments.answerbase',),
        ),
        migrations.CreateModel(
            name='AnswerSelectMultiple',
            fields=[
                ('answerbase_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='experiments.answerbase')),
                ('body', models.TextField(blank=True, null=True)),
            ],
            bases=('experiments.answerbase',),
        ),
        migrations.CreateModel(
            name='AnswerText',
            fields=[
                ('answerbase_ptr', models.OneToOneField(auto_created=True, on_delete=django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to='experiments.answerbase')),
                ('body', models.TextField(blank=True, null=True)),
            ],
            bases=('experiments.answerbase',),
        ),
        migrations.CreateModel(
            name='TrialResult',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(auto_now_add=True)),
                ('start_time', models.DateTimeField(blank=True, null=True)),
                ('end_time', models.DateTimeField(blank=True, null=True)),
                ('key_pressed', models.CharField(blank=True, max_length=255, null=True)),
                ('webcam_file', models.FileField(blank=True, null=True, upload_to=experiments.models.visual_folder)),
                ('trial_number', models.IntegerField(default=0)),
                ('resolution_w', models.IntegerField(default=0, verbose_name='Resolution width')),
                ('resolution_h', models.IntegerField(default=0, verbose_name='Resolution height')),
                ('subject', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.subjectdata')),
                ('trialitem', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='experiments.trialitem')),
            ],
        ),
        migrations.CreateModel(
            name='Question',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('text', models.TextField()),
                ('required', models.BooleanField()),
                ('question_type', models.CharField(choices=[('text', 'text'), ('radio', 'radio'), ('select', 'select'), ('select-multiple', 'select multiple'), ('integer', 'integer'), ('number-range', 'integer range')], default='text', max_length=200)),
                ('choices', models.TextField(blank=True, help_text='If the question type is "radio", "select", or "select multiple", provide a comma-separated list of options (e.g., a, b, c). If the question type is "integer range", provide the min and max integers (e.g., 1, 10).', null=True)),
                ('position', models.PositiveSmallIntegerField(null=True, verbose_name='Position')),
                ('experiment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.experiment')),
            ],
            options={
                'ordering': ['position'],
            },
        ),
        migrations.CreateModel(
            name='OuterBlockItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('outer_block_name', models.CharField(max_length=20)),
                ('position', models.PositiveSmallIntegerField(null=True, verbose_name='Position')),
                ('randomise_inner_blocks', models.BooleanField(default=False)),
                ('listitem', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.listitem')),
            ],
            options={
                'ordering': ['position'],
            },
        ),
        migrations.CreateModel(
            name='ConsentQuestion',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('text', models.TextField()),
                ('position', models.PositiveSmallIntegerField(null=True, verbose_name='Position')),
                ('response_yes', models.CharField(default='Ja', max_length=50, verbose_name='yes')),
                ('response_no', models.CharField(default='Nein', max_length=50, verbose_name='no')),
                ('experiment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.experiment')),
            ],
            options={
                'ordering': ['position'],
            },
        ),
        migrations.AddField(
            model_name='blockitem',
            name='outerblockitem',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.outerblockitem'),
        ),
        migrations.AddField(
            model_name='answerbase',
            name='question',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='experiments.question'),
        ),
        migrations.AddField(
            model_name='answerbase',
            name='subject_data',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='experiments.subjectdata'),
        ),
    ]
